document.addEventListener("DOMContentLoaded",ready);function ready(){if(location.hash){hashWatcher()}
window.addEventListener("hashchange",hashWatcher,!1);function hashWatcher(event){var hashstr=location.hash.split('#')[1];tabClicker(hashstr)}
function tabClicker(hash){var button=document.querySelector('.service-button.'+hash);var slide=document.getElementById(hash);if(button&&slide){initialiseTabs();button.classList.add("current");slide.classList.add("current")}}
var buttons=document.querySelectorAll('.service-button');for(var i=0;i<buttons.length;i++){buttons[i].addEventListener('click',servicesTab,!1)}
function servicesTab(event){initialiseTabs();var tabId=event.currentTarget.href.split('#')[1];document.getElementById(tabId).classList.add("current");if(event.currentTarget.classList.contains("service-button")){event.currentTarget.classList.add("current");event.preventDefault();window.history.pushState("",document.title,window.location.pathname)}}
function initialiseTabs(){var serviceitem=document.getElementsByClassName("service-item");for(var i=0;i<serviceitem.length;i++){serviceitem[i].classList.remove("current")}
var servicebuttons=document.getElementsByClassName("service-button");for(var i=0;i<servicebuttons.length;i++){servicebuttons[i].classList.remove("current")}}}
window.onload=function(){try{var isDown=!1;var offset=0;var handle=null;var valueFrom=document.querySelector('.double-range .min-start').innerHTML;var valueTo=document.querySelector('.double-range .max-end').innerHTML;var handles=document.querySelectorAll('.slider-handle');var handleFrom=document.querySelector('.slider-handle.price-from');var handleTo=document.querySelector('.slider-handle.price-to');var sliderRange=document.querySelector('.slider-range')}catch(e){}
if(handleFrom&&handleTo){handleFrom.addEventListener('mousedown',mouseDown,!1);handleFrom.addEventListener('click',function(event){event.preventDefault()},!1);handleTo.addEventListener('mousedown',mouseDown,!1);handleTo.addEventListener('click',function(event){event.preventDefault()},!1);initialiseRange()}
function initialiseRange(){if(document.querySelector('.double-range')){var firstHandle=calcWidth(document.getElementById('range-start').value,valueTo);var lastHandle=calcWidth(document.getElementById('range-end').value,valueTo);handleFrom.style.left=firstHandle+'%';handleTo.style.left=lastHandle+'%';sliderRange.style.left=firstHandle+'%';sliderRange.style.width=(lastHandle-firstHandle)+'%';document.querySelector('.double-range .value-from').innerHTML='от '+(Math.round(firstHandle*valueTo/100));document.querySelector('.double-range .value-to').innerHTML='до '+(Math.round(lastHandle*valueTo/100))}}
function updateValues(handle){if(handle==handleFrom){var val=(Math.round(parseInt(handleFrom.style.left)*valueTo/100));document.querySelector('.double-range .value-from').innerHTML='от '+val;document.getElementById('range-start').value=val}else{var val=(Math.round(parseInt(handleTo.style.left)*valueTo/100));document.querySelector('.double-range .value-to').innerHTML='до '+val;document.getElementById('range-end').value=val}}
function calcWidth(curValue,maxValue){if(maxValue>=0){return Math.round(curValue/maxValue*100)}else{return 0}}
function mouseDown(event){if(event.button===0){isDown=!0;event.preventDefault();handle=event.currentTarget;offset=event.currentTarget.offsetLeft-event.clientX+10;document.addEventListener('mouseup',function(){if(event.button===0){isDown=!1}},!0)}}
document.addEventListener('mousemove',function(event){if(isDown){event.preventDefault();var minValue=0;var maxValue=document.querySelector('.price-slider').clientWidth;var moveDistance=event.clientX+offset;if(moveDistance<minValue){moveDistance=minValue}else if(moveDistance>maxValue){moveDistance=maxValue}
moveDistance=calcWidth(moveDistance,maxValue);if(handle==handleFrom){if(moveDistance>parseInt(handleTo.style.left)){moveDistance=parseInt(handleTo.style.left)}
handleFrom.style.left=moveDistance+'%';updateValues(handleFrom);sliderRange.style.left=handleFrom.style.left;sliderRange.style.width=parseInt(handleTo.style.left)-parseInt(handleFrom.style.left)+'%'}else{if(moveDistance<parseInt(handleFrom.style.left)){moveDistance=parseInt(handleFrom.style.left)}
handleTo.style.left=moveDistance+'%';updateValues(handleTo);sliderRange.style.width=parseInt(handleTo.style.left)-parseInt(handleFrom.style.left)+'%'}}},!0);var formFields=document.querySelectorAll('.form-contact input[type="text"], .form-contact textarea, .form-contact input[type="email"]');var formSubmit=document.querySelector('.form-contact input[type="submit"]');var form=document.querySelector('.form-contact');if(form){form.addEventListener('submit',validateAll,!1)}
initialiseForm();function initialiseForm(){for(var i=0;i<formFields.length;i++){formFields[i].addEventListener('blur',validate,!1);formFields[i].classList.remove('validate')}}
function validate(event){event.currentTarget.classList.add('validate')}
function validateAll(event){for(var i=0;i<formFields.length;i++){formFields[i].classList.add('validate');if(!formFields[i].validity.valid){event.preventDefault();formFields[i].classList.toggle('error-animation')}}}
var mapLink=document.querySelector('.map-popup-link');var mapOverlay=document.getElementById('popup-map');if(mapLink){mapLink.addEventListener('click',function(event){mapOverlay.classList.add('show');mapOverlay.addEventListener('click',function(event){if(event.target==mapOverlay){mapOverlay.classList.remove('show')}});event.preventDefault();window.addEventListener("keydown",function(event){if(event.keyCode===27){if(mapOverlay.classList.contains('show')){mapOverlay.classList.remove('show')}}});var formClose=mapOverlay.querySelector('.modal-close-btn');if(formClose){formClose.addEventListener('click',function(event){mapOverlay.classList.remove('show');event.preventDefault()})}},!1)}
var contactLink=document.querySelector('.form-contact-link');var formOverlay=document.getElementById('popup-writeus');if(contactLink){var formShutdown=function(event){if(formOverlay.classList.contains('show')){formOverlay.classList.remove('show')}
var activeValidate=formOverlay.querySelectorAll('.validate');for(var i=0;i<activeValidate.length;i++){activeValidate[i].classList.remove('validate')}
form.reset();event.preventDefault()};contactLink.addEventListener('click',function(event){formOverlay.classList.add('show');formOverlay.addEventListener('click',function(event){if(event.target==formOverlay){formShutdown(event)}});event.preventDefault();var firstField=document.querySelector('.form-contact input');firstField.focus();window.addEventListener("keydown",function(event){if(event.keyCode===27){formShutdown(event)}});var formClose=formOverlay.querySelector('.modal-close-btn');if(formClose){formClose.addEventListener('click',function(event){formShutdown(event)})}},!1)}}
